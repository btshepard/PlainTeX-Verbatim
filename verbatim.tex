% display environment
\def\begindisplay{\begingroup\par\ \par\hfil}
\def\enddisplay{\hfil\par\ \par\endgroup}

% \def\begindisplay{\par\ \par\begingroup\leftskip=0pt plus 1fil\rightskip=\leftskip\parindent=0pt\parfillskip=0pt}
% \def\enddisplay{\par\ \par\endgroup}

% boilerplate
\def\gobble#1{}
\def\makeinnocent#1{\catcode`#1=12\relax}
\def\makeactive#1{\catcode`#1=13\relax}

% safety macros
\def\makepipeother{\makeinnocent{|}}
\def\makepipeactive{\makeactive{|}}
\def\pipe{\bgroup\string|\egroup}

% obey spaces/lines/blank lines
\def\showspaces{\makeinnocent{ }}
\newif\ifblankline
\def\obeyblanklines{%
    \begingroup
    \lccode`~=`\^^M\relax
    \lowercase{\endgroup\def~}%
    {\endgraf\ifblankline\vskip\baselineskip\fi\blanklinetrue}
    \makeactive{\^^M}
    \everypar{\blanklinefalse}%
}

% define |...| and ||...|| verbatim environments
\newif\ifvisiblespaces
\makepipeactive
\def|{%
    \begingroup
    \let\do\makeinnocent\dospecials
    \ifvisiblespaces\showspaces\else\obeyspaces\fi
    \obeylines
    \doverbatim%
}
\def\doverbatim#1{%
    \ifx|#1
        \makepipeother\expandafter\displayverb
    \else
        \inlineverb#1\relax
    \fi%
}

% |...| environment
\long\def\inlineverb#1|{\tt#1\endgroup\visiblespacesfalse}

% ||...|| environment
\makepipeother
\long\def\displayverb#1||{%
    \begindisplay
    \obeyblanklines
    \par\vskip-\baselineskip\relax
    \tt#1%
    \enddisplay
    \endgroup
    \visiblespacesfalse%
}
\makepipeactive

% @|...| and @||...|| for visible spaces
\def\atchar{\char`\@\relax}
\makeactive{@}
\begingroup
\gdef @{\futurelet\nextchar\doat}
\gdef\doat{%
    \ifx\^^M\nextchar
        \expandafter\gobble%
    \else
        \ifx|\nextchar
            \expandafter\visiblespacestrue%
        \else
            \atchar
        \fi
    \fi%
}
\endgroup

% usage comments
\centerline{\font\large=cmr10 at 18pt \large Plain\TeX\ Verbatim}
\vskip1.5\baselineskip{}
\centerline{Benjamin T. Shepard}
\vskip1ex{}
\centerline{July 1, 2022}
\vskip1.5\baselineskip{}
\openup0.4ex{}

An inline verbatim such as\ |this is \inline| can be made with the code {\tt\pipe...\pipe}. If visible spaces are desired, use 
{\tt @\string|...\string|} instead, which will produce @|this is \inline|. A display verbatim such as
||this is \display||
can be made with {\tt\pipe\pipe...\pipe\pipe}. If visible spaces are desired, use {\tt @\pipe\pipe...\pipe\pipe} instead, which will produce
@||this is \display.||
Every normal \TeX\ character (except {\tt\pipe}) as well as all of the special characters can be used inside this environment, as shown in the following example:
||!$@$#%^&*()-+=\ /.,;'`~th@<is$ ]\bye *is{ #a '`1\rho > *\tes<t* \undefined .??["||
Normally, the pipe character {\tt\pipe} can only be used inside the display verbatim {\tt\pipe\pipe...\pipe\pipe}. However, the macros |\makepipeother| and |\makepipeactive| turn the character {\tt\pipe} into an innocent character and back into an active character, respectively. This allows for use of the pipe literal in horizontal mode.
There is also the macro |\pipe| which expands to
|| \bgroup\string|\egroup ||
displaying the literal {\tt\pipe}. These macros can be used to, for example, execute
||{\tt th\pipe{}s is a pipe}||
or
\begindisplay
\tt
\makepipeother
\string\makepipeother\string{\string\tt\ th\string\pipe\string{\string}s is a pipe\string}\string\makepipeactive
\makepipeactive
\enddisplay
which will each display {\tt th\pipe{}s is a pipe}. Of course, these macros cannot be used inside the {\tt\pipe...\pipe} or {\tt\pipe\pipe...\pipe\pipe} environments, as they will be treated as strings of catcode 12 characters.

The character {\tt @} is able to be used regularly, and can also be used at the end of lines. Code such as
||1 this is a t@st
2 @
3
4 this is a test@
5
6 \bye||
will compile as expected. These verbatim environments also obey spaces, lines, and blank lines.

\bye